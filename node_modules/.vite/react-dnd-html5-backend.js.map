{
  "version": 3,
  "sources": ["../react-dnd-html5-backend/src/utils/js_utils.ts", "../react-dnd-html5-backend/src/EnterLeaveCounter.ts", "../react-dnd-html5-backend/src/NativeDragSources/NativeDragSource.ts", "../react-dnd-html5-backend/src/NativeTypes.ts", "../react-dnd-html5-backend/src/NativeDragSources/getDataFromDataTransfer.ts", "../react-dnd-html5-backend/src/NativeDragSources/nativeTypesConfig.ts", "../react-dnd-html5-backend/src/NativeDragSources/index.ts", "../react-dnd-html5-backend/src/BrowserDetector.ts", "../react-dnd-html5-backend/src/MonotonicInterpolant.ts", "../react-dnd-html5-backend/src/OffsetUtils.ts", "../react-dnd-html5-backend/src/OptionsReader.ts", "../react-dnd-html5-backend/src/HTML5BackendImpl.ts", "../react-dnd-html5-backend/src/getEmptyImage.ts", "../react-dnd-html5-backend/src/index.ts"],
  "sourcesContent": ["// cheap lodash replacements\n\nexport function memoize<T>(fn: () => T): () => T {\n\tlet result: T | null = null\n\tconst memoized = () => {\n\t\tif (result == null) {\n\t\t\tresult = fn()\n\t\t}\n\t\treturn result\n\t}\n\treturn memoized\n}\n\n/**\n * drop-in replacement for _.without\n */\nexport function without<T>(items: T[], item: T) {\n\treturn items.filter((i) => i !== item)\n}\n\nexport function union<T extends string | number>(itemsA: T[], itemsB: T[]) {\n\tconst set = new Set<T>()\n\tconst insertItem = (item: T) => set.add(item)\n\titemsA.forEach(insertItem)\n\titemsB.forEach(insertItem)\n\n\tconst result: T[] = []\n\tset.forEach((key) => result.push(key))\n\treturn result\n}\n", "import { union, without } from './utils/js_utils.js'\n\ntype NodePredicate = (node: Node | null | undefined) => boolean\n\nexport class EnterLeaveCounter {\n\tprivate entered: any[] = []\n\tprivate isNodeInDocument: NodePredicate\n\n\tpublic constructor(isNodeInDocument: NodePredicate) {\n\t\tthis.isNodeInDocument = isNodeInDocument\n\t}\n\n\tpublic enter(enteringNode: EventTarget | null): boolean {\n\t\tconst previousLength = this.entered.length\n\n\t\tconst isNodeEntered = (node: Node): boolean =>\n\t\t\tthis.isNodeInDocument(node) &&\n\t\t\t(!node.contains || node.contains(enteringNode as Node))\n\n\t\tthis.entered = union(this.entered.filter(isNodeEntered), [enteringNode])\n\n\t\treturn previousLength === 0 && this.entered.length > 0\n\t}\n\n\tpublic leave(leavingNode: EventTarget | null): boolean {\n\t\tconst previousLength = this.entered.length\n\n\t\tthis.entered = without(\n\t\t\tthis.entered.filter(this.isNodeInDocument),\n\t\t\tleavingNode,\n\t\t)\n\n\t\treturn previousLength > 0 && this.entered.length === 0\n\t}\n\n\tpublic reset(): void {\n\t\tthis.entered = []\n\t}\n}\n", "import type { DragDropMonitor } from 'dnd-core'\n\nimport type { NativeItemConfig } from './nativeTypesConfig.js'\n\nexport class NativeDragSource {\n\tpublic item: any\n\tprivate config: NativeItemConfig\n\n\tpublic constructor(config: NativeItemConfig) {\n\t\tthis.config = config\n\t\tthis.item = {}\n\t\tthis.initializeExposedProperties()\n\t}\n\n\tprivate initializeExposedProperties() {\n\t\tObject.keys(this.config.exposeProperties).forEach((property) => {\n\t\t\tObject.defineProperty(this.item, property, {\n\t\t\t\tconfigurable: true, // This is needed to allow redefining it later\n\t\t\t\tenumerable: true,\n\t\t\t\tget() {\n\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\tconsole.warn(\n\t\t\t\t\t\t`Browser doesn't allow reading \"${property}\" until the drop event.`,\n\t\t\t\t\t)\n\t\t\t\t\treturn null\n\t\t\t\t},\n\t\t\t})\n\t\t})\n\t}\n\n\tpublic loadDataTransfer(dataTransfer: DataTransfer | null | undefined): void {\n\t\tif (dataTransfer) {\n\t\t\tconst newProperties: PropertyDescriptorMap = {}\n\t\t\tObject.keys(this.config.exposeProperties).forEach((property) => {\n\t\t\t\tconst propertyFn = this.config.exposeProperties[property]\n\t\t\t\tif (propertyFn != null) {\n\t\t\t\t\tnewProperties[property] = {\n\t\t\t\t\t\tvalue: propertyFn(dataTransfer, this.config.matchesTypes),\n\t\t\t\t\t\tconfigurable: true,\n\t\t\t\t\t\tenumerable: true,\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\tObject.defineProperties(this.item, newProperties)\n\t\t}\n\t}\n\n\tpublic canDrag(): boolean {\n\t\treturn true\n\t}\n\n\tpublic beginDrag(): any {\n\t\treturn this.item\n\t}\n\n\tpublic isDragging(monitor: DragDropMonitor, handle: string): boolean {\n\t\treturn handle === monitor.getSourceId()\n\t}\n\n\tpublic endDrag(): void {\n\t\t// empty\n\t}\n}\n", "export const FILE = '__NATIVE_FILE__'\nexport const URL = '__NATIVE_URL__'\nexport const TEXT = '__NATIVE_TEXT__'\nexport const HTML = '__NATIVE_HTML__'\n", "export function getDataFromDataTransfer(\n\tdataTransfer: DataTransfer,\n\ttypesToTry: string[],\n\tdefaultValue: string,\n): string {\n\tconst result = typesToTry.reduce(\n\t\t(resultSoFar, typeToTry) => resultSoFar || dataTransfer.getData(typeToTry),\n\t\t'',\n\t)\n\n\treturn result != null ? result : defaultValue\n}\n", "import * as NativeTypes from '../NativeTypes.js'\nimport { getDataFromDataTransfer } from './getDataFromDataTransfer.js'\n\nexport interface NativeItemConfigExposePropreties {\n\t[property: string]: (\n\t\tdataTransfer: DataTransfer,\n\t\tmatchesTypes: string[],\n\t) => any\n}\n\nexport interface NativeItemConfig {\n\texposeProperties: NativeItemConfigExposePropreties\n\tmatchesTypes: string[]\n}\n\nexport const nativeTypesConfig: {\n\t[key: string]: NativeItemConfig\n} = {\n\t[NativeTypes.FILE]: {\n\t\texposeProperties: {\n\t\t\tfiles: (dataTransfer: DataTransfer): File[] =>\n\t\t\t\tArray.prototype.slice.call(dataTransfer.files),\n\t\t\titems: (dataTransfer: DataTransfer): DataTransferItemList =>\n\t\t\t\tdataTransfer.items,\n\t\t\tdataTransfer: (dataTransfer: DataTransfer): DataTransfer => dataTransfer,\n\t\t},\n\t\tmatchesTypes: ['Files'],\n\t},\n\t[NativeTypes.HTML]: {\n\t\texposeProperties: {\n\t\t\thtml: (dataTransfer: DataTransfer, matchesTypes: string[]): string =>\n\t\t\t\tgetDataFromDataTransfer(dataTransfer, matchesTypes, ''),\n\t\t\tdataTransfer: (dataTransfer: DataTransfer): DataTransfer => dataTransfer,\n\t\t},\n\t\tmatchesTypes: ['Html', 'text/html'],\n\t},\n\t[NativeTypes.URL]: {\n\t\texposeProperties: {\n\t\t\turls: (dataTransfer: DataTransfer, matchesTypes: string[]): string[] =>\n\t\t\t\tgetDataFromDataTransfer(dataTransfer, matchesTypes, '').split('\\n'),\n\t\t\tdataTransfer: (dataTransfer: DataTransfer): DataTransfer => dataTransfer,\n\t\t},\n\t\tmatchesTypes: ['Url', 'text/uri-list'],\n\t},\n\t[NativeTypes.TEXT]: {\n\t\texposeProperties: {\n\t\t\ttext: (dataTransfer: DataTransfer, matchesTypes: string[]): string =>\n\t\t\t\tgetDataFromDataTransfer(dataTransfer, matchesTypes, ''),\n\t\t\tdataTransfer: (dataTransfer: DataTransfer): DataTransfer => dataTransfer,\n\t\t},\n\t\tmatchesTypes: ['Text', 'text/plain'],\n\t},\n}\n", "import { NativeDragSource } from './NativeDragSource.js'\nimport { nativeTypesConfig } from './nativeTypesConfig.js'\n\nexport function createNativeDragSource(\n\ttype: string,\n\tdataTransfer?: DataTransfer,\n): NativeDragSource {\n\tconst config = nativeTypesConfig[type]\n\tif (!config) {\n\t\tthrow new Error(`native type ${type} has no configuration`)\n\t}\n\tconst result = new NativeDragSource(config)\n\tresult.loadDataTransfer(dataTransfer)\n\treturn result\n}\n\nexport function matchNativeItemType(\n\tdataTransfer: DataTransfer | null,\n): string | null {\n\tif (!dataTransfer) {\n\t\treturn null\n\t}\n\n\tconst dataTransferTypes = Array.prototype.slice.call(dataTransfer.types || [])\n\treturn (\n\t\tObject.keys(nativeTypesConfig).filter((nativeItemType) => {\n\t\t\tconst typeConfig = nativeTypesConfig[nativeItemType]\n\t\t\tif (!typeConfig?.matchesTypes) {\n\t\t\t\treturn false\n\t\t\t}\n\t\t\treturn typeConfig.matchesTypes.some(\n\t\t\t\t(t) => dataTransferTypes.indexOf(t) > -1,\n\t\t\t)\n\t\t})[0] || null\n\t)\n}\n", "import { memoize } from './utils/js_utils.js'\n\ndeclare global {\n\tinterface Window extends HTMLElement {\n\t\tsafari: any\n\t}\n}\n\nexport type Predicate = () => boolean\nexport const isFirefox: Predicate = memoize(() =>\n\t/firefox/i.test(navigator.userAgent),\n)\nexport const isSafari: Predicate = memoize(() => Boolean(window.safari))\n", "export class MonotonicInterpolant {\n\tprivate xs: any\n\tprivate ys: any\n\tprivate c1s: any\n\tprivate c2s: any\n\tprivate c3s: any\n\n\tpublic constructor(xs: number[], ys: number[]) {\n\t\tconst { length } = xs\n\n\t\t// Rearrange xs and ys so that xs is sorted\n\t\tconst indexes = []\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tindexes.push(i)\n\t\t}\n\t\tindexes.sort((a, b) => ((xs[a] as number) < (xs[b] as number) ? -1 : 1))\n\n\t\t// Get consecutive differences and slopes\n\t\tconst dys = []\n\t\tconst dxs = []\n\t\tconst ms = []\n\t\tlet dx\n\t\tlet dy\n\t\tfor (let i = 0; i < length - 1; i++) {\n\t\t\tdx = (xs[i + 1] as number) - (xs[i] as number)\n\t\t\tdy = (ys[i + 1] as number) - (ys[i] as number)\n\t\t\tdxs.push(dx)\n\t\t\tdys.push(dy)\n\t\t\tms.push(dy / dx)\n\t\t}\n\n\t\t// Get degree-1 coefficients\n\t\tconst c1s = [ms[0]]\n\t\tfor (let i = 0; i < dxs.length - 1; i++) {\n\t\t\tconst m2 = ms[i] as number\n\t\t\tconst mNext = ms[i + 1] as number\n\t\t\tif (m2 * mNext <= 0) {\n\t\t\t\tc1s.push(0)\n\t\t\t} else {\n\t\t\t\tdx = dxs[i] as number\n\t\t\t\tconst dxNext = dxs[i + 1] as number\n\t\t\t\tconst common = dx + dxNext\n\t\t\t\tc1s.push(\n\t\t\t\t\t(3 * common) / ((common + dxNext) / m2 + (common + dx) / mNext),\n\t\t\t\t)\n\t\t\t}\n\t\t}\n\t\tc1s.push(ms[ms.length - 1])\n\n\t\t// Get degree-2 and degree-3 coefficients\n\t\tconst c2s = []\n\t\tconst c3s = []\n\t\tlet m\n\t\tfor (let i = 0; i < c1s.length - 1; i++) {\n\t\t\tm = ms[i] as number\n\t\t\tconst c1 = c1s[i] as number\n\t\t\tconst invDx = 1 / (dxs[i] as number)\n\t\t\tconst common = c1 + (c1s[i + 1] as number) - m - m\n\t\t\tc2s.push((m - c1 - common) * invDx)\n\t\t\tc3s.push(common * invDx * invDx)\n\t\t}\n\n\t\tthis.xs = xs\n\t\tthis.ys = ys\n\t\tthis.c1s = c1s\n\t\tthis.c2s = c2s\n\t\tthis.c3s = c3s\n\t}\n\n\tpublic interpolate(x: number): number {\n\t\tconst { xs, ys, c1s, c2s, c3s } = this\n\n\t\t// The rightmost point in the dataset should give an exact result\n\t\tlet i = xs.length - 1\n\t\tif (x === xs[i]) {\n\t\t\treturn ys[i]\n\t\t}\n\n\t\t// Search for the interval x is in, returning the corresponding y if x is one of the original xs\n\t\tlet low = 0\n\t\tlet high = c3s.length - 1\n\t\tlet mid\n\t\twhile (low <= high) {\n\t\t\tmid = Math.floor(0.5 * (low + high))\n\t\t\tconst xHere = xs[mid]\n\t\t\tif (xHere < x) {\n\t\t\t\tlow = mid + 1\n\t\t\t} else if (xHere > x) {\n\t\t\t\thigh = mid - 1\n\t\t\t} else {\n\t\t\t\treturn ys[mid]\n\t\t\t}\n\t\t}\n\t\ti = Math.max(0, high)\n\n\t\t// Interpolate\n\t\tconst diff = x - xs[i]\n\t\tconst diffSq = diff * diff\n\t\treturn ys[i] + c1s[i] * diff + c2s[i] * diffSq + c3s[i] * diff * diffSq\n\t}\n}\n", "import type { XYCoord } from 'dnd-core'\n\nimport { isFirefox, isSafari } from './BrowserDetector.js'\nimport { MonotonicInterpolant } from './MonotonicInterpolant.js'\n\nconst ELEMENT_NODE = 1\n\nexport function getNodeClientOffset(node: Node): XYCoord | null {\n\tconst el = node.nodeType === ELEMENT_NODE ? node : node.parentElement\n\n\tif (!el) {\n\t\treturn null\n\t}\n\n\tconst { top, left } = (el as HTMLElement).getBoundingClientRect()\n\treturn { x: left, y: top }\n}\n\nexport function getEventClientOffset(e: MouseEvent): XYCoord {\n\treturn {\n\t\tx: e.clientX,\n\t\ty: e.clientY,\n\t}\n}\n\nfunction isImageNode(node: any) {\n\treturn (\n\t\tnode.nodeName === 'IMG' &&\n\t\t(isFirefox() || !document.documentElement?.contains(node))\n\t)\n}\n\nfunction getDragPreviewSize(\n\tisImage: boolean,\n\tdragPreview: any,\n\tsourceWidth: number,\n\tsourceHeight: number,\n) {\n\tlet dragPreviewWidth = isImage ? dragPreview.width : sourceWidth\n\tlet dragPreviewHeight = isImage ? dragPreview.height : sourceHeight\n\n\t// Work around @2x coordinate discrepancies in browsers\n\tif (isSafari() && isImage) {\n\t\tdragPreviewHeight /= window.devicePixelRatio\n\t\tdragPreviewWidth /= window.devicePixelRatio\n\t}\n\treturn { dragPreviewWidth, dragPreviewHeight }\n}\n\nexport function getDragPreviewOffset(\n\tsourceNode: HTMLElement,\n\tdragPreview: HTMLElement,\n\tclientOffset: XYCoord,\n\tanchorPoint: { anchorX: number; anchorY: number },\n\toffsetPoint: { offsetX: number; offsetY: number },\n): XYCoord {\n\t// The browsers will use the image intrinsic size under different conditions.\n\t// Firefox only cares if it's an image, but WebKit also wants it to be detached.\n\tconst isImage = isImageNode(dragPreview)\n\tconst dragPreviewNode = isImage ? sourceNode : dragPreview\n\tconst dragPreviewNodeOffsetFromClient = getNodeClientOffset(\n\t\tdragPreviewNode,\n\t) as XYCoord\n\tconst offsetFromDragPreview = {\n\t\tx: clientOffset.x - dragPreviewNodeOffsetFromClient.x,\n\t\ty: clientOffset.y - dragPreviewNodeOffsetFromClient.y,\n\t}\n\tconst { offsetWidth: sourceWidth, offsetHeight: sourceHeight } = sourceNode\n\tconst { anchorX, anchorY } = anchorPoint\n\tconst { dragPreviewWidth, dragPreviewHeight } = getDragPreviewSize(\n\t\tisImage,\n\t\tdragPreview,\n\t\tsourceWidth,\n\t\tsourceHeight,\n\t)\n\n\tconst calculateYOffset = () => {\n\t\tconst interpolantY = new MonotonicInterpolant(\n\t\t\t[0, 0.5, 1],\n\t\t\t[\n\t\t\t\t// Dock to the top\n\t\t\t\toffsetFromDragPreview.y,\n\t\t\t\t// Align at the center\n\t\t\t\t(offsetFromDragPreview.y / sourceHeight) * dragPreviewHeight,\n\t\t\t\t// Dock to the bottom\n\t\t\t\toffsetFromDragPreview.y + dragPreviewHeight - sourceHeight,\n\t\t\t],\n\t\t)\n\t\tlet y = interpolantY.interpolate(anchorY)\n\t\t// Work around Safari 8 positioning bug\n\t\tif (isSafari() && isImage) {\n\t\t\t// We'll have to wait for @3x to see if this is entirely correct\n\t\t\ty += (window.devicePixelRatio - 1) * dragPreviewHeight\n\t\t}\n\t\treturn y\n\t}\n\n\tconst calculateXOffset = () => {\n\t\t// Interpolate coordinates depending on anchor point\n\t\t// If you know a simpler way to do this, let me know\n\t\tconst interpolantX = new MonotonicInterpolant(\n\t\t\t[0, 0.5, 1],\n\t\t\t[\n\t\t\t\t// Dock to the left\n\t\t\t\toffsetFromDragPreview.x,\n\t\t\t\t// Align at the center\n\t\t\t\t(offsetFromDragPreview.x / sourceWidth) * dragPreviewWidth,\n\t\t\t\t// Dock to the right\n\t\t\t\toffsetFromDragPreview.x + dragPreviewWidth - sourceWidth,\n\t\t\t],\n\t\t)\n\t\treturn interpolantX.interpolate(anchorX)\n\t}\n\n\t// Force offsets if specified in the options.\n\tconst { offsetX, offsetY } = offsetPoint\n\tconst isManualOffsetX = offsetX === 0 || offsetX\n\tconst isManualOffsetY = offsetY === 0 || offsetY\n\treturn {\n\t\tx: isManualOffsetX ? offsetX : calculateXOffset(),\n\t\ty: isManualOffsetY ? offsetY : calculateYOffset(),\n\t}\n}\n", "import type { HTML5BackendContext, HTML5BackendOptions } from './types.js'\n\nexport class OptionsReader {\n\tpublic ownerDocument: Document | null = null\n\tprivate globalContext: HTML5BackendContext\n\tprivate optionsArgs: HTML5BackendOptions | undefined\n\n\tpublic constructor(\n\t\tglobalContext: HTML5BackendContext,\n\t\toptions?: HTML5BackendOptions,\n\t) {\n\t\tthis.globalContext = globalContext\n\t\tthis.optionsArgs = options\n\t}\n\n\tpublic get window(): Window | undefined {\n\t\tif (this.globalContext) {\n\t\t\treturn this.globalContext\n\t\t} else if (typeof window !== 'undefined') {\n\t\t\treturn window\n\t\t}\n\t\treturn undefined\n\t}\n\n\tpublic get document(): Document | undefined {\n\t\tif (this.globalContext?.document) {\n\t\t\treturn this.globalContext.document\n\t\t} else if (this.window) {\n\t\t\treturn this.window.document\n\t\t} else {\n\t\t\treturn undefined\n\t\t}\n\t}\n\n\tpublic get rootElement(): Node | undefined {\n\t\treturn this.optionsArgs?.rootElement || this.window\n\t}\n}\n", "import type {\n\tBackend,\n\tDragDropActions,\n\tDragDropManager,\n\tDragDropMonitor,\n\tHandlerRegistry,\n\tIdentifier,\n\tUnsubscribe,\n\tXYCoord,\n} from 'dnd-core'\n\nimport { EnterLeaveCounter } from './EnterLeaveCounter.js'\nimport {\n\tcreateNativeDragSource,\n\tmatchNativeItemType,\n} from './NativeDragSources/index.js'\nimport type { NativeDragSource } from './NativeDragSources/NativeDragSource.js'\nimport * as NativeTypes from './NativeTypes.js'\nimport {\n\tgetDragPreviewOffset,\n\tgetEventClientOffset,\n\tgetNodeClientOffset,\n} from './OffsetUtils.js'\nimport { OptionsReader } from './OptionsReader.js'\nimport type { HTML5BackendContext, HTML5BackendOptions } from './types.js'\n\ntype RootNode = Node & { __isReactDndBackendSetUp: boolean | undefined }\n\nexport class HTML5BackendImpl implements Backend {\n\tprivate options: OptionsReader\n\n\t// React-Dnd Components\n\tprivate actions: DragDropActions\n\tprivate monitor: DragDropMonitor\n\tprivate registry: HandlerRegistry\n\n\t// Internal State\n\tprivate enterLeaveCounter: EnterLeaveCounter\n\n\tprivate sourcePreviewNodes: Map<string, Element> = new Map()\n\tprivate sourcePreviewNodeOptions: Map<string, any> = new Map()\n\tprivate sourceNodes: Map<string, Element> = new Map()\n\tprivate sourceNodeOptions: Map<string, any> = new Map()\n\n\tprivate dragStartSourceIds: string[] | null = null\n\tprivate dropTargetIds: string[] = []\n\tprivate dragEnterTargetIds: string[] = []\n\tprivate currentNativeSource: NativeDragSource | null = null\n\tprivate currentNativeHandle: Identifier | null = null\n\tprivate currentDragSourceNode: Element | null = null\n\tprivate altKeyPressed = false\n\tprivate mouseMoveTimeoutTimer: number | null = null\n\tprivate asyncEndDragFrameId: number | null = null\n\tprivate dragOverTargetIds: string[] | null = null\n\n\tprivate lastClientOffset: XYCoord | null = null\n\tprivate hoverRafId: number | null = null\n\n\tpublic constructor(\n\t\tmanager: DragDropManager,\n\t\tglobalContext?: HTML5BackendContext,\n\t\toptions?: HTML5BackendOptions,\n\t) {\n\t\tthis.options = new OptionsReader(globalContext, options)\n\t\tthis.actions = manager.getActions()\n\t\tthis.monitor = manager.getMonitor()\n\t\tthis.registry = manager.getRegistry()\n\t\tthis.enterLeaveCounter = new EnterLeaveCounter(this.isNodeInDocument)\n\t}\n\n\t/**\n\t * Generate profiling statistics for the HTML5Backend.\n\t */\n\tpublic profile(): Record<string, number> {\n\t\treturn {\n\t\t\tsourcePreviewNodes: this.sourcePreviewNodes.size,\n\t\t\tsourcePreviewNodeOptions: this.sourcePreviewNodeOptions.size,\n\t\t\tsourceNodeOptions: this.sourceNodeOptions.size,\n\t\t\tsourceNodes: this.sourceNodes.size,\n\t\t\tdragStartSourceIds: this.dragStartSourceIds?.length || 0,\n\t\t\tdropTargetIds: this.dropTargetIds.length,\n\t\t\tdragEnterTargetIds: this.dragEnterTargetIds.length,\n\t\t\tdragOverTargetIds: this.dragOverTargetIds?.length || 0,\n\t\t}\n\t}\n\n\t// public for test\n\tpublic get window(): Window | undefined {\n\t\treturn this.options.window\n\t}\n\tpublic get document(): Document | undefined {\n\t\treturn this.options.document\n\t}\n\t/**\n\t * Get the root element to use for event subscriptions\n\t */\n\tprivate get rootElement(): Node | undefined {\n\t\treturn this.options.rootElement as Node\n\t}\n\n\tpublic setup(): void {\n\t\tconst root = this.rootElement as RootNode | undefined\n\t\tif (root === undefined) {\n\t\t\treturn\n\t\t}\n\n\t\tif (root.__isReactDndBackendSetUp) {\n\t\t\tthrow new Error('Cannot have two HTML5 backends at the same time.')\n\t\t}\n\t\troot.__isReactDndBackendSetUp = true\n\t\tthis.addEventListeners(root)\n\t}\n\n\tpublic teardown(): void {\n\t\tconst root = this.rootElement as RootNode\n\t\tif (root === undefined) {\n\t\t\treturn\n\t\t}\n\n\t\troot.__isReactDndBackendSetUp = false\n\t\tthis.removeEventListeners(this.rootElement as Element)\n\t\tthis.clearCurrentDragSourceNode()\n\t\tif (this.asyncEndDragFrameId) {\n\t\t\tthis.window?.cancelAnimationFrame(this.asyncEndDragFrameId)\n\t\t}\n\t}\n\n\tpublic connectDragPreview(\n\t\tsourceId: string,\n\t\tnode: Element,\n\t\toptions: any,\n\t): Unsubscribe {\n\t\tthis.sourcePreviewNodeOptions.set(sourceId, options)\n\t\tthis.sourcePreviewNodes.set(sourceId, node)\n\n\t\treturn (): void => {\n\t\t\tthis.sourcePreviewNodes.delete(sourceId)\n\t\t\tthis.sourcePreviewNodeOptions.delete(sourceId)\n\t\t}\n\t}\n\n\tpublic connectDragSource(\n\t\tsourceId: string,\n\t\tnode: Element,\n\t\toptions: any,\n\t): Unsubscribe {\n\t\tthis.sourceNodes.set(sourceId, node)\n\t\tthis.sourceNodeOptions.set(sourceId, options)\n\n\t\tconst handleDragStart = (e: any) => this.handleDragStart(e, sourceId)\n\t\tconst handleSelectStart = (e: any) => this.handleSelectStart(e)\n\n\t\tnode.setAttribute('draggable', 'true')\n\t\tnode.addEventListener('dragstart', handleDragStart)\n\t\tnode.addEventListener('selectstart', handleSelectStart)\n\n\t\treturn (): void => {\n\t\t\tthis.sourceNodes.delete(sourceId)\n\t\t\tthis.sourceNodeOptions.delete(sourceId)\n\n\t\t\tnode.removeEventListener('dragstart', handleDragStart)\n\t\t\tnode.removeEventListener('selectstart', handleSelectStart)\n\t\t\tnode.setAttribute('draggable', 'false')\n\t\t}\n\t}\n\n\tpublic connectDropTarget(targetId: string, node: HTMLElement): Unsubscribe {\n\t\tconst handleDragEnter = (e: DragEvent) => this.handleDragEnter(e, targetId)\n\t\tconst handleDragOver = (e: DragEvent) => this.handleDragOver(e, targetId)\n\t\tconst handleDrop = (e: DragEvent) => this.handleDrop(e, targetId)\n\n\t\tnode.addEventListener('dragenter', handleDragEnter)\n\t\tnode.addEventListener('dragover', handleDragOver)\n\t\tnode.addEventListener('drop', handleDrop)\n\n\t\treturn (): void => {\n\t\t\tnode.removeEventListener('dragenter', handleDragEnter)\n\t\t\tnode.removeEventListener('dragover', handleDragOver)\n\t\t\tnode.removeEventListener('drop', handleDrop)\n\t\t}\n\t}\n\n\tprivate addEventListeners(target: Node) {\n\t\t// SSR Fix (https://github.com/react-dnd/react-dnd/pull/813\n\t\tif (!target.addEventListener) {\n\t\t\treturn\n\t\t}\n\t\ttarget.addEventListener(\n\t\t\t'dragstart',\n\t\t\tthis.handleTopDragStart as EventListener,\n\t\t)\n\t\ttarget.addEventListener('dragstart', this.handleTopDragStartCapture, true)\n\t\ttarget.addEventListener('dragend', this.handleTopDragEndCapture, true)\n\t\ttarget.addEventListener(\n\t\t\t'dragenter',\n\t\t\tthis.handleTopDragEnter as EventListener,\n\t\t)\n\t\ttarget.addEventListener(\n\t\t\t'dragenter',\n\t\t\tthis.handleTopDragEnterCapture as EventListener,\n\t\t\ttrue,\n\t\t)\n\t\ttarget.addEventListener(\n\t\t\t'dragleave',\n\t\t\tthis.handleTopDragLeaveCapture as EventListener,\n\t\t\ttrue,\n\t\t)\n\t\ttarget.addEventListener('dragover', this.handleTopDragOver as EventListener)\n\t\ttarget.addEventListener(\n\t\t\t'dragover',\n\t\t\tthis.handleTopDragOverCapture as EventListener,\n\t\t\ttrue,\n\t\t)\n\t\ttarget.addEventListener('drop', this.handleTopDrop as EventListener)\n\t\ttarget.addEventListener(\n\t\t\t'drop',\n\t\t\tthis.handleTopDropCapture as EventListener,\n\t\t\ttrue,\n\t\t)\n\t}\n\n\tprivate removeEventListeners(target: Node) {\n\t\t// SSR Fix (https://github.com/react-dnd/react-dnd/pull/813\n\t\tif (!target.removeEventListener) {\n\t\t\treturn\n\t\t}\n\t\ttarget.removeEventListener('dragstart', this.handleTopDragStart as any)\n\t\ttarget.removeEventListener(\n\t\t\t'dragstart',\n\t\t\tthis.handleTopDragStartCapture,\n\t\t\ttrue,\n\t\t)\n\t\ttarget.removeEventListener('dragend', this.handleTopDragEndCapture, true)\n\t\ttarget.removeEventListener(\n\t\t\t'dragenter',\n\t\t\tthis.handleTopDragEnter as EventListener,\n\t\t)\n\t\ttarget.removeEventListener(\n\t\t\t'dragenter',\n\t\t\tthis.handleTopDragEnterCapture as EventListener,\n\t\t\ttrue,\n\t\t)\n\t\ttarget.removeEventListener(\n\t\t\t'dragleave',\n\t\t\tthis.handleTopDragLeaveCapture as EventListener,\n\t\t\ttrue,\n\t\t)\n\t\ttarget.removeEventListener(\n\t\t\t'dragover',\n\t\t\tthis.handleTopDragOver as EventListener,\n\t\t)\n\t\ttarget.removeEventListener(\n\t\t\t'dragover',\n\t\t\tthis.handleTopDragOverCapture as EventListener,\n\t\t\ttrue,\n\t\t)\n\t\ttarget.removeEventListener('drop', this.handleTopDrop as EventListener)\n\t\ttarget.removeEventListener(\n\t\t\t'drop',\n\t\t\tthis.handleTopDropCapture as EventListener,\n\t\t\ttrue,\n\t\t)\n\t}\n\n\tprivate getCurrentSourceNodeOptions() {\n\t\tconst sourceId = this.monitor.getSourceId() as string\n\t\tconst sourceNodeOptions = this.sourceNodeOptions.get(sourceId)\n\n\t\treturn {\n\t\t\tdropEffect: this.altKeyPressed ? 'copy' : 'move',\n\t\t\t...(sourceNodeOptions || {}),\n\t\t}\n\t}\n\n\tprivate getCurrentDropEffect() {\n\t\tif (this.isDraggingNativeItem()) {\n\t\t\t// It makes more sense to default to 'copy' for native resources\n\t\t\treturn 'copy'\n\t\t}\n\n\t\treturn this.getCurrentSourceNodeOptions().dropEffect\n\t}\n\n\tprivate getCurrentSourcePreviewNodeOptions() {\n\t\tconst sourceId = this.monitor.getSourceId() as string\n\t\tconst sourcePreviewNodeOptions = this.sourcePreviewNodeOptions.get(sourceId)\n\n\t\treturn {\n\t\t\tanchorX: 0.5,\n\t\t\tanchorY: 0.5,\n\t\t\tcaptureDraggingState: false,\n\t\t\t...(sourcePreviewNodeOptions || {}),\n\t\t}\n\t}\n\n\tprivate getSourceClientOffset = (sourceId: string): XYCoord | null => {\n\t\tconst source = this.sourceNodes.get(sourceId)\n\t\treturn (source && getNodeClientOffset(source as HTMLElement)) || null\n\t}\n\n\tprivate isDraggingNativeItem() {\n\t\tconst itemType = this.monitor.getItemType()\n\t\treturn Object.keys(NativeTypes).some(\n\t\t\t(key: string) => (NativeTypes as any)[key] === itemType,\n\t\t)\n\t}\n\n\tprivate beginDragNativeItem(type: string, dataTransfer?: DataTransfer) {\n\t\tthis.clearCurrentDragSourceNode()\n\n\t\tthis.currentNativeSource = createNativeDragSource(type, dataTransfer)\n\t\tthis.currentNativeHandle = this.registry.addSource(\n\t\t\ttype,\n\t\t\tthis.currentNativeSource,\n\t\t)\n\t\tthis.actions.beginDrag([this.currentNativeHandle])\n\t}\n\n\tprivate endDragNativeItem = (): void => {\n\t\tif (!this.isDraggingNativeItem()) {\n\t\t\treturn\n\t\t}\n\n\t\tthis.actions.endDrag()\n\t\tif (this.currentNativeHandle) {\n\t\t\tthis.registry.removeSource(this.currentNativeHandle)\n\t\t}\n\t\tthis.currentNativeHandle = null\n\t\tthis.currentNativeSource = null\n\t}\n\n\tprivate isNodeInDocument = (node: Node | null | undefined): boolean => {\n\t\t// Check the node either in the main document or in the current context\n\t\treturn Boolean(\n\t\t\tnode &&\n\t\t\t\tthis.document &&\n\t\t\t\tthis.document.body &&\n\t\t\t\tthis.document.body.contains(node),\n\t\t)\n\t}\n\n\tprivate endDragIfSourceWasRemovedFromDOM = (): void => {\n\t\tconst node = this.currentDragSourceNode\n\t\tif (node == null || this.isNodeInDocument(node)) {\n\t\t\treturn\n\t\t}\n\n\t\tif (this.clearCurrentDragSourceNode() && this.monitor.isDragging()) {\n\t\t\tthis.actions.endDrag()\n\t\t}\n\t\tthis.cancelHover()\n\t}\n\n\tprivate setCurrentDragSourceNode(node: Element | null) {\n\t\tthis.clearCurrentDragSourceNode()\n\t\tthis.currentDragSourceNode = node\n\n\t\t// A timeout of > 0 is necessary to resolve Firefox issue referenced\n\t\t// See:\n\t\t//   * https://github.com/react-dnd/react-dnd/pull/928\n\t\t//   * https://github.com/react-dnd/react-dnd/issues/869\n\t\tconst MOUSE_MOVE_TIMEOUT = 1000\n\n\t\t// Receiving a mouse event in the middle of a dragging operation\n\t\t// means it has ended and the drag source node disappeared from DOM,\n\t\t// so the browser didn't dispatch the dragend event.\n\t\t//\n\t\t// We need to wait before we start listening for mousemove events.\n\t\t// This is needed because the drag preview needs to be drawn or else it fires an 'mousemove' event\n\t\t// immediately in some browsers.\n\t\t//\n\t\t// See:\n\t\t//   * https://github.com/react-dnd/react-dnd/pull/928\n\t\t//   * https://github.com/react-dnd/react-dnd/issues/869\n\t\t//\n\t\tthis.mouseMoveTimeoutTimer = setTimeout(() => {\n\t\t\treturn this.rootElement?.addEventListener(\n\t\t\t\t'mousemove',\n\t\t\t\tthis.endDragIfSourceWasRemovedFromDOM,\n\t\t\t\ttrue,\n\t\t\t)\n\t\t}, MOUSE_MOVE_TIMEOUT) as any as number\n\t}\n\n\tprivate clearCurrentDragSourceNode() {\n\t\tif (this.currentDragSourceNode) {\n\t\t\tthis.currentDragSourceNode = null\n\n\t\t\tif (this.rootElement) {\n\t\t\t\tthis.window?.clearTimeout(this.mouseMoveTimeoutTimer || undefined)\n\t\t\t\tthis.rootElement.removeEventListener(\n\t\t\t\t\t'mousemove',\n\t\t\t\t\tthis.endDragIfSourceWasRemovedFromDOM,\n\t\t\t\t\ttrue,\n\t\t\t\t)\n\t\t\t}\n\n\t\t\tthis.mouseMoveTimeoutTimer = null\n\t\t\treturn true\n\t\t}\n\n\t\treturn false\n\t}\n\n\tprivate scheduleHover = (dragOverTargetIds: string[] | null) => {\n\t\tif (\n\t\t\tthis.hoverRafId === null &&\n\t\t\ttypeof requestAnimationFrame !== 'undefined'\n\t\t) {\n\t\t\tthis.hoverRafId = requestAnimationFrame(() => {\n\t\t\t\tif (this.monitor.isDragging()) {\n\t\t\t\t\tthis.actions.hover(dragOverTargetIds || [], {\n\t\t\t\t\t\tclientOffset: this.lastClientOffset,\n\t\t\t\t\t})\n\t\t\t\t}\n\n\t\t\t\tthis.hoverRafId = null\n\t\t\t})\n\t\t}\n\t}\n\n\tprivate cancelHover = () => {\n\t\tif (\n\t\t\tthis.hoverRafId !== null &&\n\t\t\ttypeof cancelAnimationFrame !== 'undefined'\n\t\t) {\n\t\t\tcancelAnimationFrame(this.hoverRafId)\n\t\t\tthis.hoverRafId = null\n\t\t}\n\t}\n\n\tpublic handleTopDragStartCapture = (): void => {\n\t\tthis.clearCurrentDragSourceNode()\n\t\tthis.dragStartSourceIds = []\n\t}\n\n\tpublic handleDragStart(e: DragEvent, sourceId: string): void {\n\t\tif (e.defaultPrevented) {\n\t\t\treturn\n\t\t}\n\n\t\tif (!this.dragStartSourceIds) {\n\t\t\tthis.dragStartSourceIds = []\n\t\t}\n\t\tthis.dragStartSourceIds.unshift(sourceId)\n\t}\n\n\tpublic handleTopDragStart = (e: DragEvent): void => {\n\t\tif (e.defaultPrevented) {\n\t\t\treturn\n\t\t}\n\n\t\tconst { dragStartSourceIds } = this\n\t\tthis.dragStartSourceIds = null\n\n\t\tconst clientOffset = getEventClientOffset(e)\n\n\t\t// Avoid crashing if we missed a drop event or our previous drag died\n\t\tif (this.monitor.isDragging()) {\n\t\t\tthis.actions.endDrag()\n\t\t\tthis.cancelHover()\n\t\t}\n\n\t\t// Don't publish the source just yet (see why below)\n\t\tthis.actions.beginDrag(dragStartSourceIds || [], {\n\t\t\tpublishSource: false,\n\t\t\tgetSourceClientOffset: this.getSourceClientOffset,\n\t\t\tclientOffset,\n\t\t})\n\n\t\tconst { dataTransfer } = e\n\t\tconst nativeType = matchNativeItemType(dataTransfer)\n\n\t\tif (this.monitor.isDragging()) {\n\t\t\tif (dataTransfer && typeof dataTransfer.setDragImage === 'function') {\n\t\t\t\t// Use custom drag image if user specifies it.\n\t\t\t\t// If child drag source refuses drag but parent agrees,\n\t\t\t\t// use parent's node as drag image. Neither works in IE though.\n\t\t\t\tconst sourceId: string = this.monitor.getSourceId() as string\n\t\t\t\tconst sourceNode = this.sourceNodes.get(sourceId)\n\t\t\t\tconst dragPreview = this.sourcePreviewNodes.get(sourceId) || sourceNode\n\n\t\t\t\tif (dragPreview) {\n\t\t\t\t\tconst { anchorX, anchorY, offsetX, offsetY } =\n\t\t\t\t\t\tthis.getCurrentSourcePreviewNodeOptions()\n\t\t\t\t\tconst anchorPoint = { anchorX, anchorY }\n\t\t\t\t\tconst offsetPoint = { offsetX, offsetY }\n\t\t\t\t\tconst dragPreviewOffset = getDragPreviewOffset(\n\t\t\t\t\t\tsourceNode as HTMLElement,\n\t\t\t\t\t\tdragPreview as HTMLElement,\n\t\t\t\t\t\tclientOffset,\n\t\t\t\t\t\tanchorPoint,\n\t\t\t\t\t\toffsetPoint,\n\t\t\t\t\t)\n\n\t\t\t\t\tdataTransfer.setDragImage(\n\t\t\t\t\t\tdragPreview,\n\t\t\t\t\t\tdragPreviewOffset.x,\n\t\t\t\t\t\tdragPreviewOffset.y,\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\t// Firefox won't drag without setting data\n\t\t\t\tdataTransfer?.setData('application/json', {} as any)\n\t\t\t} catch (err) {\n\t\t\t\t// IE doesn't support MIME types in setData\n\t\t\t}\n\n\t\t\t// Store drag source node so we can check whether\n\t\t\t// it is removed from DOM and trigger endDrag manually.\n\t\t\tthis.setCurrentDragSourceNode(e.target as Element)\n\n\t\t\t// Now we are ready to publish the drag source.. or are we not?\n\t\t\tconst { captureDraggingState } = this.getCurrentSourcePreviewNodeOptions()\n\t\t\tif (!captureDraggingState) {\n\t\t\t\t// Usually we want to publish it in the next tick so that browser\n\t\t\t\t// is able to screenshot the current (not yet dragging) state.\n\t\t\t\t//\n\t\t\t\t// It also neatly avoids a situation where render() returns null\n\t\t\t\t// in the same tick for the source element, and browser freaks out.\n\t\t\t\tsetTimeout(() => this.actions.publishDragSource(), 0)\n\t\t\t} else {\n\t\t\t\t// In some cases the user may want to override this behavior, e.g.\n\t\t\t\t// to work around IE not supporting custom drag previews.\n\t\t\t\t//\n\t\t\t\t// When using a custom drag layer, the only way to prevent\n\t\t\t\t// the default drag preview from drawing in IE is to screenshot\n\t\t\t\t// the dragging state in which the node itself has zero opacity\n\t\t\t\t// and height. In this case, though, returning null from render()\n\t\t\t\t// will abruptly end the dragging, which is not obvious.\n\t\t\t\t//\n\t\t\t\t// This is the reason such behavior is strictly opt-in.\n\t\t\t\tthis.actions.publishDragSource()\n\t\t\t}\n\t\t} else if (nativeType) {\n\t\t\t// A native item (such as URL) dragged from inside the document\n\t\t\tthis.beginDragNativeItem(nativeType)\n\t\t} else if (\n\t\t\tdataTransfer &&\n\t\t\t!dataTransfer.types &&\n\t\t\t((e.target && !(e.target as Element).hasAttribute) ||\n\t\t\t\t!(e.target as Element).hasAttribute('draggable'))\n\t\t) {\n\t\t\t// Looks like a Safari bug: dataTransfer.types is null, but there was no draggable.\n\t\t\t// Just let it drag. It's a native type (URL or text) and will be picked up in\n\t\t\t// dragenter handler.\n\t\t\treturn\n\t\t} else {\n\t\t\t// If by this time no drag source reacted, tell browser not to drag.\n\t\t\te.preventDefault()\n\t\t}\n\t}\n\n\tpublic handleTopDragEndCapture = (): void => {\n\t\tif (this.clearCurrentDragSourceNode() && this.monitor.isDragging()) {\n\t\t\t// Firefox can dispatch this event in an infinite loop\n\t\t\t// if dragend handler does something like showing an alert.\n\t\t\t// Only proceed if we have not handled it already.\n\t\t\tthis.actions.endDrag()\n\t\t}\n\t\tthis.cancelHover()\n\t}\n\n\tpublic handleTopDragEnterCapture = (e: DragEvent): void => {\n\t\tthis.dragEnterTargetIds = []\n\n\t\tif (this.isDraggingNativeItem()) {\n\t\t\tthis.currentNativeSource?.loadDataTransfer(e.dataTransfer)\n\t\t}\n\n\t\tconst isFirstEnter = this.enterLeaveCounter.enter(e.target)\n\t\tif (!isFirstEnter || this.monitor.isDragging()) {\n\t\t\treturn\n\t\t}\n\n\t\tconst { dataTransfer } = e\n\t\tconst nativeType = matchNativeItemType(dataTransfer)\n\n\t\tif (nativeType) {\n\t\t\t// A native item (such as file or URL) dragged from outside the document\n\t\t\tthis.beginDragNativeItem(nativeType, dataTransfer as DataTransfer)\n\t\t}\n\t}\n\n\tpublic handleDragEnter(_e: DragEvent, targetId: string): void {\n\t\tthis.dragEnterTargetIds.unshift(targetId)\n\t}\n\n\tpublic handleTopDragEnter = (e: DragEvent): void => {\n\t\tconst { dragEnterTargetIds } = this\n\t\tthis.dragEnterTargetIds = []\n\n\t\tif (!this.monitor.isDragging()) {\n\t\t\t// This is probably a native item type we don't understand.\n\t\t\treturn\n\t\t}\n\n\t\tthis.altKeyPressed = e.altKey\n\n\t\t// If the target changes position as the result of `dragenter`, `dragover` might still\n\t\t// get dispatched despite target being no longer there. The easy solution is to check\n\t\t// whether there actually is a target before firing `hover`.\n\t\tif (dragEnterTargetIds.length > 0) {\n\t\t\tthis.actions.hover(dragEnterTargetIds, {\n\t\t\t\tclientOffset: getEventClientOffset(e),\n\t\t\t})\n\t\t}\n\n\t\tconst canDrop = dragEnterTargetIds.some((targetId) =>\n\t\t\tthis.monitor.canDropOnTarget(targetId),\n\t\t)\n\n\t\tif (canDrop) {\n\t\t\t// IE requires this to fire dragover events\n\t\t\te.preventDefault()\n\t\t\tif (e.dataTransfer) {\n\t\t\t\te.dataTransfer.dropEffect = this.getCurrentDropEffect()\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic handleTopDragOverCapture = (e: DragEvent): void => {\n\t\tthis.dragOverTargetIds = []\n\n\t\tif (this.isDraggingNativeItem()) {\n\t\t\tthis.currentNativeSource?.loadDataTransfer(e.dataTransfer)\n\t\t}\n\t}\n\n\tpublic handleDragOver(_e: DragEvent, targetId: string): void {\n\t\tif (this.dragOverTargetIds === null) {\n\t\t\tthis.dragOverTargetIds = []\n\t\t}\n\t\tthis.dragOverTargetIds.unshift(targetId)\n\t}\n\n\tpublic handleTopDragOver = (e: DragEvent): void => {\n\t\tconst { dragOverTargetIds } = this\n\t\tthis.dragOverTargetIds = []\n\n\t\tif (!this.monitor.isDragging()) {\n\t\t\t// This is probably a native item type we don't understand.\n\t\t\t// Prevent default \"drop and blow away the whole document\" action.\n\t\t\te.preventDefault()\n\t\t\tif (e.dataTransfer) {\n\t\t\t\te.dataTransfer.dropEffect = 'none'\n\t\t\t}\n\t\t\treturn\n\t\t}\n\n\t\tthis.altKeyPressed = e.altKey\n\t\tthis.lastClientOffset = getEventClientOffset(e)\n\n\t\tthis.scheduleHover(dragOverTargetIds)\n\n\t\tconst canDrop = (dragOverTargetIds || []).some((targetId) =>\n\t\t\tthis.monitor.canDropOnTarget(targetId),\n\t\t)\n\n\t\tif (canDrop) {\n\t\t\t// Show user-specified drop effect.\n\t\t\te.preventDefault()\n\t\t\tif (e.dataTransfer) {\n\t\t\t\te.dataTransfer.dropEffect = this.getCurrentDropEffect()\n\t\t\t}\n\t\t} else if (this.isDraggingNativeItem()) {\n\t\t\t// Don't show a nice cursor but still prevent default\n\t\t\t// \"drop and blow away the whole document\" action.\n\t\t\te.preventDefault()\n\t\t} else {\n\t\t\te.preventDefault()\n\t\t\tif (e.dataTransfer) {\n\t\t\t\te.dataTransfer.dropEffect = 'none'\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic handleTopDragLeaveCapture = (e: DragEvent): void => {\n\t\tif (this.isDraggingNativeItem()) {\n\t\t\te.preventDefault()\n\t\t}\n\n\t\tconst isLastLeave = this.enterLeaveCounter.leave(e.target)\n\t\tif (!isLastLeave) {\n\t\t\treturn\n\t\t}\n\n\t\tif (this.isDraggingNativeItem()) {\n\t\t\tsetTimeout(() => this.endDragNativeItem(), 0)\n\t\t}\n\t\tthis.cancelHover()\n\t}\n\n\tpublic handleTopDropCapture = (e: DragEvent): void => {\n\t\tthis.dropTargetIds = []\n\n\t\tif (this.isDraggingNativeItem()) {\n\t\t\te.preventDefault()\n\t\t\tthis.currentNativeSource?.loadDataTransfer(e.dataTransfer)\n\t\t} else if (matchNativeItemType(e.dataTransfer)) {\n\t\t\t// Dragging some elements, like <a> and <img> may still behave like a native drag event,\n\t\t\t// even if the current drag event matches a user-defined type.\n\t\t\t// Stop the default behavior when we're not expecting a native item to be dropped.\n\n\t\t\te.preventDefault()\n\t\t}\n\n\t\tthis.enterLeaveCounter.reset()\n\t}\n\n\tpublic handleDrop(_e: DragEvent, targetId: string): void {\n\t\tthis.dropTargetIds.unshift(targetId)\n\t}\n\n\tpublic handleTopDrop = (e: DragEvent): void => {\n\t\tconst { dropTargetIds } = this\n\t\tthis.dropTargetIds = []\n\n\t\tthis.actions.hover(dropTargetIds, {\n\t\t\tclientOffset: getEventClientOffset(e),\n\t\t})\n\t\tthis.actions.drop({ dropEffect: this.getCurrentDropEffect() })\n\n\t\tif (this.isDraggingNativeItem()) {\n\t\t\tthis.endDragNativeItem()\n\t\t} else if (this.monitor.isDragging()) {\n\t\t\tthis.actions.endDrag()\n\t\t}\n\t\tthis.cancelHover()\n\t}\n\n\tpublic handleSelectStart = (e: DragEvent): void => {\n\t\tconst target = e.target as HTMLElement & { dragDrop: () => void }\n\n\t\t// Only IE requires us to explicitly say\n\t\t// we want drag drop operation to start\n\t\tif (typeof target.dragDrop !== 'function') {\n\t\t\treturn\n\t\t}\n\n\t\t// Inputs and textareas should be selectable\n\t\tif (\n\t\t\ttarget.tagName === 'INPUT' ||\n\t\t\ttarget.tagName === 'SELECT' ||\n\t\t\ttarget.tagName === 'TEXTAREA' ||\n\t\t\ttarget.isContentEditable\n\t\t) {\n\t\t\treturn\n\t\t}\n\n\t\t// For other targets, ask IE\n\t\t// to enable drag and drop\n\t\te.preventDefault()\n\t\ttarget.dragDrop()\n\t}\n}\n", "let emptyImage: HTMLImageElement | undefined\n\nexport function getEmptyImage(): HTMLImageElement {\n\tif (!emptyImage) {\n\t\temptyImage = new Image()\n\t\temptyImage.src =\n\t\t\t'data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=='\n\t}\n\n\treturn emptyImage\n}\n", "import type { BackendFactory, DragDropManager } from 'dnd-core'\n\nimport { HTML5BackendImpl } from './HTML5BackendImpl.js'\nimport type { HTML5BackendContext, HTML5BackendOptions } from './types.js'\nexport { getEmptyImage } from './getEmptyImage.js'\nexport * as NativeTypes from './NativeTypes.js'\nexport type { HTML5BackendContext, HTML5BackendOptions } from './types.js'\n\nexport const HTML5Backend: BackendFactory = function createBackend(\n\tmanager: DragDropManager,\n\tcontext?: HTML5BackendContext,\n\toptions?: HTML5BackendOptions,\n): HTML5BackendImpl {\n\treturn new HTML5BackendImpl(manager, context, options)\n}\n"],
  "mappings": "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",
  "names": []
}
